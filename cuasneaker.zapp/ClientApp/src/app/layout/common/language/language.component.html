<!-- Button -->
<button
    class="h-full"
    mat-button
    mat-button-base
    style="padding: 0 10px !important"
    [matMenuTriggerFor]="languages"
>
    <div class="flex flex-row h-full grids items-center">
        <ng-container
            *ngTemplateOutlet="flagImage; context: { $implicit: activeLang }"
        ></ng-container>
        <span class="text-base text-black ml-1">{{ activeLanglabel }}</span>
    </div>
</button>

<!-- Language menu -->
<mat-menu [xPosition]="'before'" #languages="matMenu">
    <ng-container *ngFor="let lang of availableLangs; trackBy: trackByFn">
        <button mat-menu-item (click)="setActiveLang(lang.id)">
            <span class="flex items-center">
                <ng-container
                    *ngTemplateOutlet="
                        flagImage;
                        context: { $implicit: lang.id }
                    "
                ></ng-container>
                <span class="text-base ml-3">{{ lang.label }}</span>
            </span>
        </button>
    </ng-container>
</mat-menu>

<!-- Flag image template -->
<ng-template let-lang #flagImage>
    <span class="relative w-6 shadow rounded-sm overflow-hidden">
        <span
            class="absolute inset-0 ring-1 ring-inset ring-black ring-opacity-10"
        ></span>
        <img
            class="w-full"
            [src]="
                'assets/images/flags/' + flagCodes[lang].toUpperCase() + '.svg'
            "
        />
    </span>
</ng-template>
